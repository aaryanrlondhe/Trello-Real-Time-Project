{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect, useCallback } from 'react';\nimport apiService from '../services/apiService';\nexport const useBoard = boardId => {\n  _s();\n  const [board, setBoard] = useState(null);\n  const [lists, setLists] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const fetchBoard = useCallback(async () => {\n    if (!boardId) return;\n    setLoading(true);\n    setError(null);\n    try {\n      const [boardResponse, listsResponse] = await Promise.all([apiService.getBoard(boardId), apiService.getBoardLists(boardId)]);\n      const boardData = boardResponse.data || boardResponse;\n      const listsData = listsResponse.data || listsResponse;\n      setBoard(boardData);\n      setLists(listsData || []);\n    } catch (err) {\n      console.error('Error fetching board:', err);\n      setError(err.message || 'Failed to load board');\n    } finally {\n      setLoading(false);\n    }\n  }, [boardId]);\n  const createBoard = useCallback(async boardData => {\n    setLoading(true);\n    setError(null);\n    try {\n      console.log('Creating board with data:', boardData);\n      const response = await apiService.createBoard(boardData);\n      const createdBoard = response.data || response; // Handle both response formats\n\n      console.log('Board created successfully:', createdBoard);\n      setBoard(createdBoard);\n      return createdBoard;\n    } catch (err) {\n      console.error('Error creating board:', err);\n      const errorMessage = err.message || 'Failed to create board';\n      setError(errorMessage);\n\n      // Re-throw the error with additional context for the component\n      throw {\n        message: errorMessage,\n        code: err.code || 500,\n        details: err.details\n      };\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n  const removeCardFromLists = useCallback(cardId => {\n    setLists(prevLists => prevLists.map(list => ({\n      ...list,\n      cards: (list.cards || []).filter(card => card.id !== cardId)\n    })));\n  }, []);\n  const refreshBoard = useCallback(() => {\n    fetchBoard();\n  }, [fetchBoard]);\n  useEffect(() => {\n    fetchBoard();\n  }, [fetchBoard]);\n  return {\n    board,\n    lists,\n    loading,\n    error,\n    createBoard,\n    refreshBoard,\n    setBoard,\n    setLists,\n    removeCardFromLists\n  };\n};\n_s(useBoard, \"Ws/VQdIqKDDfzkz14cuefYFw6Nc=\");","map":{"version":3,"names":["useState","useEffect","useCallback","apiService","useBoard","boardId","_s","board","setBoard","lists","setLists","loading","setLoading","error","setError","fetchBoard","boardResponse","listsResponse","Promise","all","getBoard","getBoardLists","boardData","data","listsData","err","console","message","createBoard","log","response","createdBoard","errorMessage","code","details","removeCardFromLists","cardId","prevLists","map","list","cards","filter","card","id","refreshBoard"],"sources":["/Users/shrushtiparkar/Documents/Trello Real-time WebSockets + API Frontend Assignment/frontend/src/hooks/useBoard.js"],"sourcesContent":["import { useState, useEffect, useCallback } from 'react';\nimport apiService from '../services/apiService';\n\nexport const useBoard = (boardId) => {\n  const [board, setBoard] = useState(null);\n  const [lists, setLists] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  const fetchBoard = useCallback(async () => {\n    if (!boardId) return;\n\n    setLoading(true);\n    setError(null);\n\n    try {\n      const [boardResponse, listsResponse] = await Promise.all([\n        apiService.getBoard(boardId),\n        apiService.getBoardLists(boardId)\n      ]);\n\n      const boardData = boardResponse.data || boardResponse;\n      const listsData = listsResponse.data || listsResponse;\n      \n      setBoard(boardData);\n      setLists(listsData || []);\n    } catch (err) {\n      console.error('Error fetching board:', err);\n      setError(err.message || 'Failed to load board');\n    } finally {\n      setLoading(false);\n    }\n  }, [boardId]);\n\n  const createBoard = useCallback(async (boardData) => {\n    setLoading(true);\n    setError(null);\n\n    try {\n      console.log('Creating board with data:', boardData);\n      const response = await apiService.createBoard(boardData);\n      const createdBoard = response.data || response; // Handle both response formats\n      \n      console.log('Board created successfully:', createdBoard);\n      setBoard(createdBoard);\n      return createdBoard;\n    } catch (err) {\n      console.error('Error creating board:', err);\n      const errorMessage = err.message || 'Failed to create board';\n      setError(errorMessage);\n      \n      // Re-throw the error with additional context for the component\n      throw {\n        message: errorMessage,\n        code: err.code || 500,\n        details: err.details\n      };\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n\n  const removeCardFromLists = useCallback((cardId) => {\n    setLists((prevLists) =>\n      prevLists.map((list) => ({\n        ...list,\n        cards: (list.cards || []).filter((card) => card.id !== cardId),\n      }))\n    );\n  }, []);\n\n  const refreshBoard = useCallback(() => {\n    fetchBoard();\n  }, [fetchBoard]);\n\n  useEffect(() => {\n    fetchBoard();\n  }, [fetchBoard]);\n\n  return {\n    board,\n    lists,\n    loading,\n    error,\n    createBoard,\n    refreshBoard,\n    setBoard,\n    setLists,\n    removeCardFromLists\n  };\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}